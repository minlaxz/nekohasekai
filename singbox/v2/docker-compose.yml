services:
    sing-box:
        image: ghcr.io/minlaxz/nekohasekai:singbox
        container_name: sing-box
        command: ["/sing-box/sing-box", "run", "-C", "/sing-box/conf"]
        restart: unless-stopped
        ports:
            - "8840-8850:8840-8850"
        env_file:
            - .env

    cloudflared:
        image: cloudflare/cloudflared:latest
        container_name: cloudflared
        restart: unless-stopped
        command: tunnel --edge-ip-version auto --tunnel quic run --token ${ARGO_AUTH}
        depends_on:
            - sing-box
        env_file:
            - .env