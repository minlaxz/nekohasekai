services:
    sing-box:
        image: ghcr.io/minlaxz/nekohasekai:singbox-v2
        container_name: sing-box-v2
        restart: unless-stopped
        ports:
            - "8840-8850:8840-8850"
        env_file:
            - .env
        volumes:
            - public:/sing-box/public

      json-server:
        build: .
        container_name: json-server
        restart: unless-stopped
        depends_on:
          - sing-box-v2
        ports:
          - "127.0.0.1:8851:8851"
        volumes:
          - public:/data:ro
        environment:
          - LOCAL_JSON_PATH=/data/local.json
          - REMOTE_JSON_URL=https://example.com/remote.json

volumes:
    public:
