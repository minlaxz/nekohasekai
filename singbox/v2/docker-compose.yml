services:
    sing-box:
        image: ghcr.io/minlaxz/nekohasekai:sing-box-v2
        container_name: sing-box-v2
        restart: unless-stopped
        ports:
            - "8840-8850:8840-8850"
        env_file:
            - .env
        volumes:
            - public:/sing-box/public

    config-server:
      image: ghcr.io/minlaxz/nekohasekai:config-server
      container_name: config-server
      restart: unless-stopped
      depends_on:
        - sing-box-v2
      ports:
        - "127.0.0.1:8851:8851"
      volumes:
        - public:/data:ro

volumes:
    public:
